image: atlassian/default-image:2

pipelines:
    branches:
      main:
        - step:
           script:
             - git remote add sync git@github.com:miyabilink/sukkiri-java3-codes.git
             - git checkout main
             - git pull
             - git merge origin/main
             - git filter-branch -f --env-filter "GIT_AUTHOR_NAME='Takuma SUGAWARA'; GIT_AUTHOR_EMAIL='sugawara@miyabilink.jp'; GIT_COMMITTER_NAME='Takuma SUGAWARA'; GIT_COMMITTER_EMAIL='sugawara@miyabilink.jp';" --tag-name-filter cat -- --all
             - git rm --cached bitbucket-pipelines.yml
             - git commit -m '修正'
             - git push -f sync main
